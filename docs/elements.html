<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="icon" type="image/png" href="img/logo_small.png">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- and it's easy to individually load additional languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    <title>Phoenix Template Engine Documentation - The `@` character</title>
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark navbar-bg shadow " style="z-index: 9999;">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="img/logo_small.png" width="30" height="30" class="d-inline-block align-top" alt="" />
                    Phoenix
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                    <ul class="navbar-nav d-flex">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/pazvanti/Phoenix/">Source Code</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/pazvanti/Phoenix/issues">Roadmap and issues</a>
                        </li>
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Documentation
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="gettingStarted.html">Getting started</a></li>
                                <li><a class="dropdown-item" href="configuration.html">Configuration</a></li>
                                <li><a class="dropdown-item" href="specialChar.html">The special `@` character</a></li>
                                <li><a class="dropdown-item" href="phoenixResponse.html">The Phoenix Response</a></li>
                                <li><a class="dropdown-item" href="fragmentRetrieval.html">Fragment retrieval</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="elements.html">Syntax and Elements</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://petrepopescu.tech">Blog</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="row content-one shadow">
            <div class="col-md-4 mt-4">
                <ul class="elements_ul">
                    <li class="elements_li"><a href="#args">Template arguments: @args()</a></li>
                    <li class="elements_li"><a href="#import">Imports: @import</a></li>
                    <li class="elements_li"><a href="#escape">Escape character: @@</a></li>
                    <li class="elements_li"><a href="#variables">Variables: @varName</a></li>
                    <li class="elements_li"><a href="#nullSafe">Null-safe printing: @?</a></li>
                    <li class="elements_li"><a href="#nullSafeTernaryOperator">Null-safe ternary operator:
                            @var?:"default"</a></li>
                    <li class="elements_li"><a href="#raw">Escaping and raw strings: @raw</a></li>
                    <li class="elements_li"><a href="#eval">Evaluating expressions: @()</a></li>
                    <li class="elements_li"><a href="#comments">Comments: @* *@</a></li>
                    <li class="elements_li"><a href="#for">For loops: @for</a></li>
                    <li class="elements_li"><a href="#if">Conditional statements: @if-elseif-else</a></li>
                    <li class="elements_li"><a href="#with">Variable declaration: @with</a></li>
                    <li class="elements_li"><a href="#template">Calling templates/fragments:
                            @templateName.template()</a></li>
                    <li class="elements_li"><a href="#contentBlocks">Content blocks: @myContent -> {}</a></li>
                    <li class="elements_li"><a href="#route">Reverse-routing: @routes.</a></li>
                    <li class="elements_li"><a href="#csrf">CSRF protection: @csrf.meta and @csrf.input</a></li>
                </ul>
            </div>
            <div class="col-md-8 mt-4 text-white">
                <h4>The Phoenix Syntax and Template Elements</h4>
                <p>In most cases, Phoenix will have the exact same syntax as Java, with the addition of the
                    <code>@</code> character being pre-pended to the statement. The <code>@</code> character must be
                    added directly adjetant to the statement, without any whitespaces.
                </p>
                <div class="row">
                    <div class="col-md-6">
                        <p><i>Valid statements</i></p>
                        <pre>
                            <code class="language-java">
@import java.util.List;

@args(int a, String b)

@if(a == 0) {

}

@if (a == 0) {

}

@for(int count = 0; count&lt;4; count++) {

}

@for (int count = 0; count&lt;4; count++) {

}
                            </code>
                        </pre>
                    </div>
                    <div class="col-md-6">
                        <p><i>Invalid statements</i></p>
                        <pre>
                            <code class="language-java">
@ import java.util.List;

@ args(int a, String b)

@ if(a == 0)
{

}

@ if (a == 0)
{

}

@ for(int count = 0; count&lt;4; count++)
{

}

@ for (int count = 0; count&lt;4; count++)
{

}
                            </code>
                        </pre>
                    </div>
                </div>
                <p>
                    Furthermore, elements that can have nested elements inside curly braces are (like <code>if</code>,
                    <code>for</code>, <code>template calls</code>, <code>content block declaration</code>,
                    <code>with</code>), must start on new lines. One exception is the <code>if</code> statement which
                    allows inline, as long as the entire statement is inline.
                </p>
                <div class="row">
                    <div class="col-md-6">
                        <p><i>Valid statements</i></p>
                        <pre>
                                <code class="language-java">
&lt;p&gt;My text&lt;/p&gt;
@if(a == 0) {
    &lt;p&gt;A is Zero&lt;/p&gt;
}

&lt;tr class=&quot;@if (i.index() % 2 == 0) {odd} else {even}&quot;&gt;
    @if (item.getChange() &lt; 0.0) {
            &lt;td class=&quot;minus&quot;&gt;@item.getChange()&lt;/td&gt;
            &lt;td class=&quot;minus&quot;&gt;@item.getRatio()&lt;/td&gt;
        } else {
            &lt;td&gt;@item.getChange()&lt;/td&gt;
            &lt;td&gt;@item.getRatio()&lt;/td&gt;
        }
&lt;/tr&gt;
                                </code>
                            </pre>
                    </div>
                    <div class="col-md-6">
                        <p><i>Invalid statements</i></p>
                        <pre>
                                <code class="language-java">
&lt;p&gt;My text&lt;/p&gt;@if(a == 0) {
    &lt;p&gt;A is Zero&lt;/p&gt;
}

@if(a == 0) 
{
    &lt;p&gt;A is Zero&lt;/p&gt;
}

&lt;tr class=&quot;@if (i.index() % 2 == 0) {odd} 
else {even}&quot;&gt;@if (item.getChange() &lt; 0.0) {
            &lt;td class=&quot;minus&quot;&gt;@item.getChange()&lt;/td&gt;
            &lt;td class=&quot;minus&quot;&gt;@item.getRatio()&lt;/td&gt;
        } else {
            &lt;td&gt;@item.getChange()&lt;/td&gt;
            &lt;td&gt;@item.getRatio()&lt;/td&gt;
        }
&lt;/tr&gt;
                                </code>
                            </pre>
                    </div>
                </div>
                <p>Phoenix currently goes for an "optimistic" approach where it will assume that the template is valid
                    and will tryu to generate the undelying Java class. If this is not the case, the underlying Java
                    class will fail to compile. At the moment Phoenix does not provide clear indication as to where the
                    template is invalid, but further work will be done to provide this as well</p>
                <p>Below you can find more clear explanations for each element supported by Phoenix, with more examples.
                </p>
                <div id="args">
                    <h5 class="element_title">Template arguments: <code>@args()</code></h5>
                    <p>
                        Each template must have a arguments declaration. This is done using the <code>@args()</code>
                        element. It is
                        recommended that the arguments be declared right below the imports
                        Additionally, you can provide input parameters for your template and you can use these input
                        parameters in the code. All input parameters must be declared on the same line. YOu can think of
                        this as the constructor of the template.
                        Input arguments are final and can't have their values changed inside the template.
                        <br>
                        Example: <code>@args(String title, int numDivs)</code>
                        <br>
                        Example:
                    <pre>
                            <code class="language-html">
@args(int a, int b)
&lt;head&gt;
    &lt;title&gt;Test page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
                            </code>
                        </pre>
                    </p>
                </div>
                <div id="import">
                    <h5 class="element_title">Imports: <code>@import</code></h5>
                    <p>
                        You can import any Java class from your project, including standard Java classes, right into the
                        template. All declared input arguments must have their underlying class imported. Imports must
                        be declared at the start of the template, before the <code>args</code> declaration. Phoenix also
                        supports static imports. Primitives and <code>java.lang.*</code> don't need to be imported.
                    <pre>
                            <code class="language-html">
@import com.example.demo.data.Stock;
@import java.util.List;
@import static java.lang.System.currentTimeMillis

@args (List&lt;Stock&gt; items)
                            </code>
                        </pre>
                    </p>
                </div>
                <div id="escape">
                    <h5 class="element_title">Escaping the <code>@</code></h5>
                    <p>
                        You may need to use the <code>@</code> character as an actual character (for example, for
                        emails). That is why you will need to escape it. This is done using, you guessed it, the @
                        character.
                    <pre>
                            <code class="language-html">
&lt;a href=&quot;mailto:test@@domain.com&quot;&gt;Email me&lt;/a&gt;
                            </code>
                        </pre>
                    </p>
                </div>
                <div id="variables">
                    <h5 class="element_title">Printing variables or calling methods</h5>
                    <p>
                        Phoenix allows you send variables from the controller to the template in an easy way. In the
                        tempalte you can refference any variable by appending the <code>@</code> character. This will
                        print the value of that variable in the HTML code of the page when it is being rendered.
                        Furthermore, you can call method from that object, just like you would in any Java class.
                    <pre>
                            <code class="language-html">
&lt;p&gt;The value of variable `test` is: @test&lt;p&gt;
&lt;p&gt;You can also call methods: @myList.get(0)&lt;/p&gt;
                            </code>
                        </pre>
                    </p>
                </div>
                <div id="nullSafe">
                    <h5 class="element_title">Null-safe printing: <code>@?</code></h5>
                    <p>
                        If a variable is null you will encounter a NullPointerException when the template is being
                        rendered. Phoenix supports two null-safety operators. The null-safe printing element will try to
                        evalueate the variable or method call. In case null is encoutnered anywhere in the stack trace,
                        nothing will be printed. Phoenix achieves this by catching the NullPointerException in the code
                        as well as valdiating that the result is not null.</p>
                    <p>In the below example, nothing will be printed if the variable <code>test</code> is null.</p>
                    <pre>
                            <code class="language-html">
&lt;p&gt;The value of variable `test` is: @?test&lt;p&gt;
                            </code>
                        </pre>
                    <p>The null-safe printing element also supports method calls. In the below example, nothing will be
                        printed if <code>myList</code> is null OR if the element returned is null</p>
                    <pre>
                        <code class="language-html">
&lt;p&gt;You can also call methods: @myList.get(0)&lt;/p&gt;
                        </code>
                    </pre>
                </div>
                <div id="nullSafeTernaryOperator">
                    <h5 class="element_title">Null-safe ternary operator: <code>@var?:"default"</code></h5>
                    <p>
                        The Null-safe ternary operator is the second null-safe element provided by Phoenix. This element
                        is great if you want to provide a default value in case the variable you are trying to print is
                        null. This element <strong>does not</strong> protect agains NullPointerException in the
                        stacktrace, however, it checks if the variable or the method call is null. If it is, the default
                        value is printed instead.
                    </p>
                    <pre>
                        <code class="language-html">
&lt;p class='@a?:&quot;defaultClass&quot;'&gt;Null-safe ternary&lt;/p&gt;
                        </code>
                    </pre>
                </div>
                <div id="raw">
                    <h5 class="element_title">Automatic escaping or printing HTML code</h5>
                    <p>By default, all variables printed are escaped using HTML4 escaping provided by Apache Commons
                        Text. This way the rendered pages are protected from code injection via persisting data that
                        eventually get's transmitted to the template.</p>
                    <p>However, there are scenarios where you would actually want to send HTML code to the template and
                        have it rendered as HTML. This is where the <code>@raw</code> element comes in. The variable or
                        result of the method call that is present inside the <code>@raw</code> element will not be
                        escaped.</p>
                    <pre>
                        <code class="language-html">
&lt;div&gt;
@raw(myHtmlStringVariable)
&lt;/div&gt;
                        </code>
                    </pre>
                </div>
                <div id="eval">
                    <h5 class="element_title">Evaluating expressions: <code>@()</code></h5>
                    <p>
                        Phoenix allows you to evaluate expressions in the template. This is done using the
                        <code>@()</code>. This element also come sin handy when you want to use a variable as part of
                        text which would otherwise be considered method calls, for example when building the URL to a
                        page where the fileName (but not the extension) is provided by your variable.
                    </p>
                    <pre>
                        <code class="language-html">
&lt;p&gt;
    Sum of @a and @b = @(a + b)
&lt;/p&gt;
&lt;a href=&quot;@(myPageName).html&quot;&gt;It holds another URL&lt;/a&gt;
                        </code>
                    </pre>
                </div>
                <div id="comments">
                    <h5 class="element_title">Adding comments to your template: <code>@* *@</code></h5>
                    <p>
                        As with any modern programming language, hgaving comments in your code can be very usefull.
                        Obviously, you could add traditional HTML comments, however these will be present in the final
                        rendered HTML. If you want to have comments that will simply be ignored, you can do this using
                        <code>@* *@</code>. The parser will simply ignore anything that is between the comment
                        identifiers. Comments can be on a single line or on multiple lines. See examples below.
                    </p>
                    <pre>
                        <code class="language-html">
@* This is a simple comment on one line *@

@*
    This is a complex comment
    on multiple lines
*@
                        </code>
                    </pre>
                </div>
                <div id="for">
                    <h5 class="element_title">For loops: <code>@for()</code></h5>
                    <p>
                        Phoenix supports <code>for</code> loops in a similar way Java does. You can define a loop using
                        the <code>@for</code> syntax and use a counter to itterate between elements as well as a
                        <code>for-in</code>. <code>For</code> statements must start on a new line, with the opening
                        curly bracket (<code>{</code>) being on the same line. Furthermore, the ending curly bracket
                        <code>}</code> should be on a seperate, empty line.
                    </p>
                    <div class="alert alert-warning" role="alert">
                        At the moment, <code>for</code> statemnt inside JavaScript code that also uses curly brackets may break parsing.
                    </div>
                    <div class="row">
                        <div class="col-md-7">
                            <pre>
                                <code class="language-html">
@for(int count = 0; count&lt;myList.size(); count++) {
    &lt;span&gt;@myList.get(count)&lt;/span&gt;
}
                                </code>
                            </pre>
                        </div>
                        <div class="col-md-5">
                            <pre>
                                <code class="language-html">
@for(String item: myList) {
    &lt;span&gt;@item&lt;/span&gt;
}
                                </code>
                            </pre>
                        </div>
                    </div>
                    <p>
                        Furthermore, Phoenix supports a <code>for-with-iterator</code> where in addition to the item
                        being returned from the collection, an itterator is also being returned which can provide the
                        index.
                    </p>
                    <pre>
                        <code class="language-html">
@for((itt, MyClass item):myList) {
    &lt;span&gt;@itt.index() : @item&lt;/span&gt;
}
                        </code>
                    </pre>
                </div>
                <div id="for">
                    <h5 class="element_title">Conditionals: <code>@if</code>, <code> @if-else</code>,
                        <code> @if-else if-else</code>
                    </h5>
                    <p>
                        Phoenix supports standard Java <code>if</code> conditionals along with <code>if-else</code> and
                        <code>if-else if-else</code> statements. The left curly bracket <code>{</code> must be on the
                        same line with the statment. Phoenix allows the <code>if</code> statment to be inline completly
                        or have the <code>if</code> statement on a new line.
                    </p>
                    <div class="alert alert-warning" role="alert">
                        At the moment, <code>if</code> statemnt inside JavaScript code that also uses curly brackets may break parsing.
                    </div>
                    <pre>
                        <code>
&lt;tr class=&quot;@if (i.index() % 2 == 0) {odd} else {even}&quot;&gt;
&lt;/tr&gt;

&lt;h5&gt;Complex if&lt;/h5&gt;
@if (a &lt; myList.size()) {
    &lt;p&gt;Smaller&lt;/p&gt;
} else if (a == myList.size()) {
    &lt;p&gt;Equal&lt;/p&gt;
} else {
    &lt;p&gt;Bigger&lt;/p&gt;
}
                        </code>
                    </pre>
                </div>
            </div>
        </div>
    </div>
</body>
<script>hljs.highlightAll();</script>

</html>